---
layout: angular
title: AngularJS - Inject required directive controller into directive controller
---

<style>
  section { overflow: auto; }

  @media (min-width: 768px) {
    .row { display: flex; }
    h2 + section { width: 370px; padding-left: 2%; }
    h2 + section + section { flex: 1; }
  }
</style>

<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.9/angular.min.js"></script>

<script>
  var app = angular.module('app', []);
</script>

<h1>
  Injecting a directive controller from another directive controller
</h1>

<p>
  ...add description of problem and why you may want to inject into directive controller (ES2015 classes, for instance)...
</p>

<p>
  ...add warning about isolate scope...
</p>

<h2>
  Injecting directive controller from a sibling directive's controller
</h2>

{% capture code %}
<form name="registerForm" register-form></form>

<script>
  app.directive('registerForm', function () {
    return {
      controller: function ($element) {
        this.formFromInheritedData = $element.inheritedData('$formController');
        this.formFromControllerMethod = $element.controller('form');
      },
      controllerAs: 'register',
      require: 'form',
      scope: {
        name: '@'
      },
      bindToController: true,
      template: '\
        <input name="email" type="email" ng-model="email">\
        \
        <h3>\
          $element.inheritedData("$formController")\
        </h3>\
        \
        <pre ng-bind="register.formFromInheritedData | json"></pre>\
        \
        <h3>\
          $element.controller("form")\
        </h3>\
        \
        <pre ng-bind="register.formFromControllerMethod | json"></pre>'
    }
  })
</script>
{% endcapture %}

<div class="row">
  <section>
    {{ code }}
  </section>

  <section>
    {% highlight html %}
      {{ code }}
    {% endhighlight %}
  </section>
</div>


<h2>
  Injecting directive controller from a parent directive's controller
</h2>

{% capture code %}
<form name="todoForm">
  <form-inner></form-inner>
</form>

<script>
  app.directive('formInner', function () {
    return {
      controller: function ($element) {
        this.formFromInheritedData = $element.inheritedData('$formController');
        this.formFromControllerMethod = $element.controller('form');
      },
      controllerAs: 'inner',
      require: '^form',
      scope: { name: '@' },
      transclude: true,
      bindToController: true,
      template: '\
        <input name="todo" ng-model="todo">\
        \
        <h3>\
          $element.inheritedData("$formController")\
        </h3>\
        \
        <pre ng-bind="inner.formFromInheritedData | json"></pre>\
        \
        <h3>\
          $element.controller("form")\
        </h3>\
        \
        <pre ng-bind="inner.formFromControllerMethod | json"></pre>'
    }
  })
</script>
{% endcapture %}

<div class="row">
  <section>
    {{ code }}
  </section>

  <section>
    {% highlight html %}
      {{ code }}
    {% endhighlight %}
  </section>
</div>
